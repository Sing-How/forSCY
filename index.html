
<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=map-bar-morph&lang=js&code=LYTwwgFghgTgLgOgM4QPYHcAyqoBMCWAdgOYAUAlANwBQAJAsQKZykBKA8uwCoD6ACgEEuACQAEAalEByAPS4ocKDKhIkzGU1QyAqgGUBCAFZJUhKQBpRAMwCuhAMZx8p0aRtIoAKROFyogN7UoqKgkLCIEPi4jNh4RGRUQaKM9tDwSAgwjMT4SHCMMACyUAAOpFJ6Ahai7l4-loHBwQIANioA1lAAXAFJTaIyMqKAUUaA_GmAk0aA9aaABUqA356ADEqAcf6Av2qA3HKA5JqAYmmAZ7qA0HKAnaZ9TS2MVnA9ALQAjADMV-ZHwXCoJT0ATACsD_3B6FFwEB6Vw-RwAvt8msIoOgoPh8D1Gj8TmdLlcrgAGCH9Z6vURvAAcWKaf1wAJ6IP64KOUj4NgKz1ErHw9lQUgRjwGQ0ARzaALE1AHN5gBAVDnI86iC4AdgAbESni93tKOSSyXiwUlQYlggA3WCieSKUQAXlEAG0jv5RIQoMBGD0pK0oAAjK1Qaralp0noAFnxbze6LeN1EVP65st1tt9qQnVdUHdNtE4runs9AE4g0TQ1b43aYPgAF6mF2WN0e0SSj4fG6fD7ps0WrMRmCdQgeJAxuPvFOp25XWsh-vh6RgWP4KyoGCEfBF0Ql-M3fHoz1XT03dF9pqZwdSMCoFrjvCs4ux0sfK748UfH3r4Kb7M7wiEFJOew2ODt0s3D4p9E3T3i68BAO2YACKMG0MJZO-8Yplc4roimbwAbetrAbkcC5o4oioFYog7u6wAOlOUE9JKVZkUhQG2gAYnuubyMRohXCmdwXpK-IUWG2YAOKMOOOTTrOPQpjBwmejWwYbpR0hQjCcIMbcCF3IGEk3lJUgAJLyGg8lfh84oEhxDbSOpLQtEQqC5PJBIXtWhlbuphAEFAloMeWNyJr-dnZupGACcec7ouKS74pKXm2gA0s5rYMQS-Jfui4kZmp4WMIQcA2PY7QgAxK4LkuiV1pxtrYDYuRTi5R4dqInqSuiZ7MWF0jFEQjDyVWImISpgFFU1sAgG0jkMZe-JiaRjVSMUqhQKk7jMHAbaVaWkqSjVy6euNhTMpExDOQxKb4viNw3LVG1EI-JiKEN7kwTcaZdchTW5EgT34CUJT4DF-2pm8oX3Wpm2qKgNi5q5_pMQdG2mIoFUzv5QLogly69n9PVSAAcowDowB0flVWeFYfJ840Y9q9GLfGbwXvizHI0lqMY-gohQsAJQoPgkHk0CVaBWexOMIzngFGo2Wc6IB0rfFfOM4UjAAB7MoesNVX6cWVuxKNGej_OiAAmuO7TySmen-pKtOFZraPjgCuGwLuRC46WKY2YFyl0xbVsQKIwFQO0qCXaLkrCZKBka1u7CRIrgmMcCya-gV_ao-w7RtGgwAO3O-LLj6a6h9m7BZMQpgMfOwmfq75tbnwqUtv12qTunQKU6Rla_W7W6sGg0SiOpSADbg8kJf6CHjboQPW8OMB2zDUd_gG-nlwnmuj6-nve77_tK6Wh1HR86257aXDV4wqiMK1AejW8K7jYfssqDFtVfn6C-Saj2iKBAMWq9Z40AGoFMAUNXI_TqmbReW4f7sxyPXBimc4ohX_PvaQAB1FQkQSDPDMAHamcEridTbtmJBx84CiAgTAKBRFRb413rccaSDcgshbEQIa-lSL7VoSAVAwB4jMJWrg8atJ6SoEZArYuy04IjSDEkAAujQYIeooDICtqQWwDgnAuFIFASwDo_CImCFkdKE5RAKNnGKUQDoECzlkUGDUogGF5BCKUdgJQ1GEENL0fompcg2FjMUXEujjinFFFIXMxAIBvhlCEIg5IEYxIiWnWWPR5wxNiRyIgrBnJMHZD8JogxRAlH0U4AoFx8DEEIOORgHJggsloj0Y0UgADESlA4fGqA0sSF4HSelafUoKeBcBXG6Y6XAKZGApm6YwdEVgbhWHxN0qw8yrAOisHM0-8F0RzPkIwU2cyaq4BXN03AiZ_TikGR8BGP0pBSI5F1J4ctRR1OECUj-lgpDYHQJciJ9hYwvjaA6E4PR0J0jBESNQuZj61I5P4_oURbQlBeDYNoLiLCVNEHAEAJRsxpxKMi7JeicDAABTAOkETghYttJUHFuL5E9Hkdco4VzgigisXY4hToYBOJcW4_xssBDyyQFkn4aKMW2lnFIYFRwQC8tyAK7E6LsxfPyIXGAIsORQD5ZgR0YEZU_EnoofIiT0TXIidS3UCgFFYuUXYRwzhXGkHwPkYAOiUX6OBq4-1jBgAIE4lYyk5BxX9GcvgNOLjgLAwUDa7QJQ9TxgxAjEFBR8DgvcYKuVto2WUuhbgWF8LEU2ozU0E18iEAWpUda9R7rHXJuyS6wxFaLH-R9U0dUES7D4E1ELWMXBsaMJcYSoFlI1RWJOMQl8MAshpQ5TatxWLJ2mCsaENIiA1BwFnYQUgM7nE2pscuhy-QYBuktaoqdFAq22OBuOldm6XBGlHRe1dhoDRGg3ZygA_GY2A96ejPptY2hd4RkDMFXaQW9qVL0uMsICxgNjwR4hiYkdUlAgA
	⚠ 请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
<div id="container" style="height: 100%"></div>

<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/jquery"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js"></script>
<!-- Uncomment this line if you want to dataTool extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.1/dist/extension/dataTool.min.js"></script>
-->
<!-- Uncomment this line if you want to use gl extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
-->
<!-- Uncomment this line if you want to echarts-stat extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
-->
<!-- Uncomment this line if you want to use map
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
-->
<!-- Uncomment these two lines if you want to use bmap extension
<script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.1/dist/extension/bmap.min.js"></script>
-->

<script type="text/javascript">
  var dom = document.getElementById('container');
  var myChart = echarts.init(dom, null, {
    renderer: 'canvas',
    useDirtyRect: false
  });
  var app = {};
  var option;

  myChart.showLoading();
  $.get('./shanghai.json', function (usaJson) {
    myChart.hideLoading();
    echarts.registerMap('USA', usaJson);
    var data = [
      {name: '浦东区', value: 61818.01512},
      {name: '闵行区', value: 19201.46881},
      {name: '徐汇区', value: 149687.0382},
      {name: '宝山区', value: 48138.83721},
      {name: '静安区', value: 111552.5},
      {name: '嘉定区', value: 8225.639292},
      {name: '松江区', value: 8492.025424},
      {name: '杨浦区', value: 50519.91667},
      {name: '黄浦区', value: 93639.08},
      {name: '虹口区', value: 65527.86667},
      {name: '长宁区', value: 91456.07619},
      {name: '青浦区', value: 12115},
      {name: '普陀区', value: 74677.08621},
      {name: '奉贤区', value: 22057.66667},
      {name: '金山区', value: 17598.53333},
      {name: '崇明区', value: 0}
    ];
    data.sort(function (a, b) {
      return a.value - b.value;
    });
    const mapOption = {
      visualMap: {
        left: 'right',
        min: 0,
        max: 120000,
        inRange: {
          // prettier-ignore
          color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
        },
        text: ['High', 'Low'],
        calculable: true
      },
      series: [
        {
          id: 'population',
          type: 'map',
          roam: true,
          map: 'USA',
          data: data
        }
      ]
    };
    const barOption = {
      xAxis: {
        type: 'value'
      },
      yAxis: {
        type: 'category',
        axisLabel: {
          rotate: 30
        },
        data: data.map(function (item) {
          return item.name;
        })
      },
      animationDurationUpdate: 1000,
      series: {
        type: 'bar',
        id: 'population',
        data: data.map(function (item) {
          return item.value;
        }),
        universalTransition: true
      }
    };
    let currentOption = mapOption;
    myChart.setOption(mapOption);
    setInterval(function () {
      currentOption = currentOption === mapOption ? barOption : mapOption;
      myChart.setOption(currentOption, true);
    }, 2000);
  });

  if (option && typeof option === 'object') {
    myChart.setOption(option);
  }

  window.addEventListener('resize', myChart.resize);
</script>
</body>
</html>