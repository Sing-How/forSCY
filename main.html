<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
    <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
<div id="container" style="height: 100%"></div>

<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/jquery"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js"></script>
<!-- Uncomment this line if you want to dataTool extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.1/dist/extension/dataTool.min.js"></script>
-->
<!-- Uncomment this line if you want to use gl extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
-->
<!-- Uncomment this line if you want to echarts-stat extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
-->
<!-- Uncomment this line if you want to use map
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
-->
<!-- Uncomment these two lines if you want to use bmap extension
<script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.1/dist/extension/bmap.min.js"></script>
-->

<script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var option;

    myChart.showLoading();
    $.get('./USA.json', function (usaJson) {
        myChart.hideLoading();
        var data = [
            // {name: '浦东区', value: 61818.01512},
            // {name: '闵行区', value: 19201.46881},
            // {name: '徐汇区', value: 149687.0382},
            // {name: '宝山区', value: 48138.83721},
            // {name: '静安区', value: 111552.5},
            // {name: '嘉定区', value: 8225.639292},
            // {name: '松江区', value: 8492.025424},
            // {name: '杨浦区', value: 50519.91667},
            // {name: '黄浦区', value: 93639.08},
            // {name: '虹口区', value: 65527.86667},
            // {name: '长宁区', value: 91456.07619},
            // {name: '青浦区', value: 12115},
            // {name: '普陀区', value: 74677.08621},
            // {name: '奉贤区', value: 22057.66667},
            // {name: '金山区', value: 17598.53333},
            // {name: '崇明区', value: 0}
            { name: 'Alabama', value: 4822023 },
            { name: 'Alaska', value: 731449 },
            { name: 'Arizona', value: 6553255 },
            { name: 'Arkansas', value: 2949131 },
            { name: 'California', value: 38041430 },
            { name: 'Colorado', value: 5187582 },
            { name: 'Connecticut', value: 3590347 },
            { name: 'Delaware', value: 917092 },
            { name: 'District of Columbia', value: 632323 },
            { name: 'Florida', value: 19317568 },
            { name: 'Georgia', value: 9919945 },
            { name: 'Hawaii', value: 1392313 },
            { name: 'Idaho', value: 1595728 },
            { name: 'Illinois', value: 12875255 },
            { name: 'Indiana', value: 6537334 },
            { name: 'Iowa', value: 3074186 },
            { name: 'Kansas', value: 2885905 },
            { name: 'Kentucky', value: 4380415 },
            { name: 'Louisiana', value: 4601893 },
            { name: 'Maine', value: 1329192 },
            { name: 'Maryland', value: 5884563 },
            { name: 'Massachusetts', value: 6646144 },
            { name: 'Michigan', value: 9883360 },
            { name: 'Minnesota', value: 5379139 },
            { name: 'Mississippi', value: 2984926 },
            { name: 'Missouri', value: 6021988 },
            { name: 'Montana', value: 1005141 },
            { name: 'Nebraska', value: 1855525 },
            { name: 'Nevada', value: 2758931 },
            { name: 'New Hampshire', value: 1320718 },
            { name: 'New Jersey', value: 8864590 },
            { name: 'New Mexico', value: 2085538 },
            { name: 'New York', value: 19570261 },
            { name: 'North Carolina', value: 9752073 },
            { name: 'North Dakota', value: 699628 },
            { name: 'Ohio', value: 11544225 },
            { name: 'Oklahoma', value: 3814820 },
            { name: 'Oregon', value: 3899353 },
            { name: 'Pennsylvania', value: 12763536 },
            { name: 'Rhode Island', value: 1050292 },
            { name: 'South Carolina', value: 4723723 },
            { name: 'South Dakota', value: 833354 },
            { name: 'Tennessee', value: 6456243 },
            { name: 'Texas', value: 26059203 },
            { name: 'Utah', value: 2855287 },
            { name: 'Vermont', value: 626011 },
            { name: 'Virginia', value: 8185867 },
            { name: 'Washington', value: 6897012 },
            { name: 'West Virginia', value: 1855413 },
            { name: 'Wisconsin', value: 5726398 },
            { name: 'Wyoming', value: 576412 },
            { name: 'Puerto Rico', value: 3667084 }
        ];
        data.sort(function (a, b) {
            return a.value - b.value;
        });
        const mapOption = {
            visualMap: {
                left: 'right',
                min: 500000,
                max: 38000000,
                inRange: {
                    // prettier-ignore
                    color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                },
                text: ['High', 'Low'],
                calculable: true
            },
            series: [
                {
                    id: 'population',
                    type: 'map',
                    roam: true,
                    map: 'USA',
                    data: data
                }
            ]
        };
        const barOption = {
            xAxis: {
                type: 'value'
            },
            yAxis: {
                type: 'category',
                axisLabel: {
                    rotate: 30
                },
                data: data.map(function (item) {
                    return item.name;
                })
            },
            animationDurationUpdate: 1000,
            series: {
                type: 'bar',
                id: 'population',
                data: data.map(function (item) {
                    return item.value;
                }),
                universalTransition: true
            }
        };
        let currentOption = mapOption;
        myChart.setOption(mapOption);
        setInterval(function () {
            currentOption = currentOption === mapOption ? barOption : mapOption;
            myChart.setOption(currentOption, true);
        }, 2000);
    });

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>
</body>
</html>